<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Recipies</title>
    <style>
      body { font-family: Arial, sans-serif; max-width: 800px; margin: 2rem auto; }
      h1 { color: #333 }
      .recipe { border: 1px solid #ddd; padding: 1rem; margin-bottom: 1rem }
      textarea { width: 100%; height: 6rem }
    </style>
  </head>
  <body>
    <h1>Recipies</h1>
    <p><a href="/">Match recipes</a> | <a href="/api/recipes?page=1&page_size=10">API</a></p>
    <section>
      {% for r in recipes %}
      <div class="recipe">
        <h2>{{ r.name }}</h2>
        <h4>Ingredients</h4>
        <ul>
          {% for i in r.ingredients %}
          <li>{{ i }}</li>
          {% endfor %}
        {% extends 'base.html' %}

        {% block title %}Recipies{% endblock %}

        {% block content %}
          <div class="row">
            <div class="col-md-8">
              <h1>Recipies</h1>
              {% for r in recipes %}
              <div class="card recipe-card">
                <div class="card-body">
                  <h5 class="card-title"><a href="/recipes/{{ r.id }}">{{ r.name }}</a></h5>
                  <h6>Ingredients</h6>
                  <p>{{ r.ingredients | join(', ') }}</p>
                  <h6>Steps</h6>
                  <p>{{ r.steps | join(', ') }}</p>
                </div>
              </div>
              {% endfor %}
            </div>

            <div class="col-md-4">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Add Recipe</h5>
                  <form method="post" action="/recipes">
                    <div class="mb-2">
                      <input class="form-control" name="name" placeholder="Name" required />
                    </div>
                    <div class="mb-2">
                      <textarea class="form-control" name="ingredients" placeholder="One per line" rows="4"></textarea>
                    </div>
                    <div class="mb-2">
                      <textarea class="form-control" name="steps" placeholder="One per line" rows="4"></textarea>
                    </div>
                    <button class="btn btn-primary" type="submit">Add</button>
                  </form>
                </div>
              </div>
            </div>
          </div>

          {% if pages and pages > 1 %}
          <nav aria-label="pagination" class="mt-3">
            <p>Page {{ page }} of {{ pages }}</p>
            <div>
              {% if page > 1 %}
              <a class="btn btn-outline-secondary" href="/?page={{ page-1 }}">Previous</a>
              {% endif %}
              {% for p in range(1, pages+1) %}
                {% if p == page %}
                  <strong class="mx-1">{{ p }}</strong>
                {% else %}
                  <a class="mx-1" href="/?page={{ p }}">{{ p }}</a>
                {% endif %}
              {% endfor %}
              {% if page < pages %}
              <a class="btn btn-outline-secondary" href="/?page={{ page+1 }}">Next</a>
              {% endif %}
            </div>
          </nav>
          {% endif %}
        {% endblock %}
